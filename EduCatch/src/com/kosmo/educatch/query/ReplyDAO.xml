<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
						
<mapper namespace = "com.kosmo.educatch.dao.ReplyMapper">
	<select id="replyList" parameterType="reply" resultType="reply">
		SELECT * FROM REPLY
	</select>
	
	<insert id="replyInsert" parameterType="reply">
		<selectKey keyProperty="reno" resultType="String" order="BEFORE">
			SELECT 'RE'||LPAD((SELECT /* +INDEX_DESC(A SYS_C0011812) */              
			NVL(MAX(SUBSTR(A.RENO,-5)),0)+1 commNO
			FROM    REPLY A), 5,'0') 
			FROM DUAL
		</selectKey>
			INSERT INTO REPLY(
			    REVIEWBOARD_RBNO,
			    RENO,
			    RECONTENT,
			    REDELETEYN,
			    REINSERTDATE,
			    REUPDATEDATE
			)
			VALUES(
			    #{reviewboard_rbno,jdbcType=VARCHAR},
			    #{reno,jdbcType=VARCHAR},
			    #{recontent,jdbcType=VARCHAR},
			    'N',
			    SYSDATE,
			    SYSDATE
			)
	</insert>
</mapper>