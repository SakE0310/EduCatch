<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kosmo.educatch.dao.SearchMapper">

	<!-- 지역 대분류 -->
	<select id="getDistrict" parameterType="search" resultType="search">
	SELECT DISTINCT
	        A.DISTRICT   AS DISTRICT
	FROM    AREA A
	</select>
	
	<!-- 지역 소분류 -->
	<select id="getCity" parameterType="search" resultType="search">
	SELECT 
	        A.CITY       AS CITY
	FROM    AREA A
	WHERE	A.DISTRICT = #{district}
 	</select>
	
	<select id="getAcaList" parameterType="academyview" resultType="academyview">
	SELECT A.ANO        AS ANO
	      ,A.ANAME      AS ANAME
	      ,A.ATEL       AS ATEL
	      ,A.AXPOINT    AS AXPOINT
	      ,A.AYPOINT    AS AYPOINT
	      ,A.AADDRNO    AS AADDRNO
	      ,A.AADDR1     AS AADDR1
	      ,A.AADDR2     AS AADDR2
	      ,A.ALOGO      AS ALOGO
	      ,A.CATEGORY_CNO   AS CATEGORY_CNO
	      ,A.ADELETEYN      AS ADELETEYN
	      ,A.AINSERTDATE    AS AINSERTDATE
	      ,A.AUPDATEDATE    AS AUPDATEDATE
	      ,B.CMAJOR AS CMAJOR
          ,B.CMINOR AS CMINOR
	FROM ACADEMY A, CATEGORY B
	<where>
		<if test="district!=null or city!=null or cmajor!=null or cminor!=null">
		A.AADDR1 LIKE '%'||#{district}||'%' 
	AND
		A.AADDR1 LIKE '%'||#{city}||'%'
	AND
		B.CMAJOR LIKE '%'||#{cmajor}||'%'
	AND
		B.CMINOR LIKE '%'||#{cminor}||'%'
		</if>
	</where>
<!-- 	WHERE -->
<!-- 		A.AADDR1 LIKE '%'||#{district}||'%' -->
<!-- 	OR -->
<!-- 		A.AADDR1 LIKE '%'||#{city}||'%' -->
<!-- 	OR -->
<!-- 		B.CMAJOR LIKE '%'||#{cmajor}||'%' -->
<!-- 	OR -->
<!-- 		B.CMINOR LIKE '%'||#{cminor}||'%' -->

<!-- 	<where> -->
<!-- 		<if test="district!=null and district!=''"> -->
<!-- 		A.AADDR1 LIKE '%'||#{district}||'%' -->
<!-- 		</if> -->
<!-- 	</where> -->
<!-- 	<where> -->
<!-- 		<if test="city!=null and city!=''"> -->
<!-- 	    A.AADDR1 LIKE '%'||#{city}||'%' -->
<!-- 		</if> -->
<!-- 	</where> -->
<!-- 	<where> -->
<!-- 		<if test="cmajor!=null and cmajor!=''"> -->
<!-- 		B.CMAJOR LIKE '%'||#{cmajor}||'%' -->
<!-- 		</if> -->
<!-- 	</where> -->
<!-- 	<where> -->
<!-- 		<if test="cmajor!=null and cmajor!=''"> -->
<!-- 		B.CMINOR LIKE '%'||#{cminor}||'%' -->
<!-- 		</if> -->
<!-- 	</where> -->
	</select>
	
	
</mapper>
